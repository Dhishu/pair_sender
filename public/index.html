<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Console Interface</title>
  <link href="https://fonts.googleapis.com/css2?family=Hack&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: monospace;
            background-color: #282c34;
            color: white;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
          flex-direction: column;
            height: 100vh;
        }
        #console {
            width: 80%;
            height: 60%;
            background-color: #1e1e1e;
            padding: 20px;
            overflow-y: auto;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }
        #inputLine {
            display: flex;
            align-items: center;
        }
        #prompt {
            color: lightgreen;
            padding-right: 5px;
        }
        #inputField {
            flex-grow: 1;
            background: none;
            border: none;
            outline: none;
            color: white;
            font-size: 16px;
        }
        .output {
            margin: 5px 0;
        }.t{font-family: 'Hack', monospace;
           color:#00ff00;}
    </style>
</head>
<body>
  <h1 class='t'>Thilina kavishan</h1><br>
    <div id="console">
        <div id="outputArea"></div>
        <div id="inputLine">
            <span id="prompt">></span>
            <input type="text" id="inputField" autofocus>
        </div>
    </div>

    <script>
        const inputField = document.getElementById('inputField');
        const outputArea = document.getElementById('outputArea');

        inputField.addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                const userInput = inputField.value;
                if (userInput.trim() !== '') {
                    processCommand(userInput);
                    inputField.value = ''; // Clear input field
                }
            }
        });

      async function processCommand(command) {
          const output = document.createElement('div');
          output.classList.add('output');
          output.textContent = '> ' + command;
          outputArea.appendChild(output);

          const response = document.createElement('div');
          response.classList.add('output');

          if (command == 'damika' || command == 'anurada' || command == 'anuradha') {
              try {
                let dr={}
                if(command=='damika'){dr['command']='d'}else{
                  dr['command']='a'
                }
                  // Send the command to the server
                  const serverResponse = await fetch('/d', {
                      method: 'POST',
                      headers: {
                          'Content-Type': 'application/json'
                      },
                      body: JSON.stringify(dr) // Sending "damika" command to server
                  });

                  if (!serverResponse.ok) {
                      throw new Error('Network response was not ok');
                  }

                  // Parse the JSON response
                  const data = await serverResponse.json();
                  response.textContent = 'Server response: ' + JSON.stringify(data);
              } catch (error) {
                  response.textContent = 'Error: ' + error.message;
              }
          } else {
              response.textContent = 'Command "' + command + '" not recognized.';
          }

          // Add the response to the output area
          outputArea.appendChild(response);

          // Scroll to the bottom
          outputArea.scrollTop = outputArea.scrollHeight;
      }
    </script>
</body>
</html>
